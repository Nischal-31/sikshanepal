{% extends "base.html" %}
{% load static %}

{% block title %}Checkout{% endblock %}

{% block content %}
<section id="about-home" class="py-4 bg-light">
  <div class="container text-center">
    <h2 class="mb-0">Checkout /</h2>
  </div>
</section>

<section class="py-5 bg-light">
  <div class="container">
    <div class="row g-5 justify-content-center">

      <!-- Billing Form -->
      <div class="col-md-7 col-lg-6">
        <div class="card shadow-sm border-0">
          <div class="card-body">
            <h3 class="mb-4">Billing Information</h3>
            <form>
              <div class="mb-3">
                <label for="name" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="name" placeholder="Nischal Moktan">
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" placeholder="bot@example.com">
              </div>
              <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" class="form-control" id="phone" placeholder="+977 980xxxxxxx">
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="col-md-5 col-lg-4">
        <div class="card shadow-sm border-0">
          <div class="card-body">
            <h4 class="card-title mb-4">Order Summary</h4>

            <ul class="list-group list-group-flush mb-3">
              <li class="list-group-item d-flex justify-content-between">
                <span class="fw-semibold">Plan:</span>
                <span class="text-capitalize">{{ plan.name }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span class="fw-semibold">Access Duration:</span>
                <span>
                  {{ plan.duration_days|divisibleby:30|yesno:"Monthly,Quarterly,Yearly" }}
                </span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span class="fw-semibold">Price:</span>
                <span>Rs. {{ plan.price }}</span>
              </li>
            </ul>

            <div class="border-top pt-3 d-flex justify-content-between fs-5">
              <strong>Total</strong>
              <strong>Rs. {{ plan.price }}</strong>
            </div>
            <div class="mt-4">
              <button type="submit" class="btn btn-success w-100 fw-bold">Pay with Esewa</button>
            <!-- eSewa Payment Button 
            <form id="esewa_form" action="https://rc-epay.esewa.com.np/api/epay/main/v2/form" method="POST" class="mt-4">
              <input type="hidden" name="amount" value="{{ amount }}">
              <input type="hidden" name="tax_amount" value="{{ tax_amount }}">
              <input type="hidden" name="total_amount" value="{{ total_amount }}">
              <input type="hidden" name="transaction_uuid" value="{{ transaction_uuid }}">
              <input type="hidden" name="product_code" value="{{ product_code }}">
              <input type="hidden" name="product_service_charge" value="{{ product_service_charge }}">
              <input type="hidden" name="product_delivery_charge" value="{{ product_delivery_charge }}">
              <input type="hidden" name="success_url" value="{{ success_url }}">
              <input type="hidden" name="failure_url" value="{{ failure_url }}">
              <input type="hidden" name="signed_field_names" value="total_amount,transaction_uuid,product_code">
              <input type="hidden" name="signature" value="{{ signature }}">
              <button type="submit" class="btn btn-success w-100 fw-bold">Pay with eSewa</button>
            </form>-->
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<style>

  /* Input focus animation */
  input:focus {
    border-color: #198754 !important;
    box-shadow: 0 0 0 0.2rem rgba(25, 135, 84, 0.25);
  }

  /* Card hover effect */
  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);
  }

  /* Button hover */
  .btn-success:hover {
    background-color: #157347;
  }
</style>
{% endblock %}
